(function () {function b(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{},n=Object.keys(i);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(i).filter(function(t){return Object.getOwnPropertyDescriptor(i,t).enumerable}))),n.forEach(function(e){c(t,e,i[e])})}return t}function c(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var a={icon:"image",props:{endpoints:Object,attrs:{type:Object,default:function(){return{}}}},computed:{style:function(){if(this.attrs.ratio)return"padding-bottom:"+100/this.attrs.ratio+"%"},fields:function(){return{alt:{label:this.$t("editor.blocks.image.alt.label"),type:"text",icon:"text"},link:{label:this.$t("editor.blocks.image.link.label"),type:"text",icon:"url",placeholder:this.$t("editor.blocks.image.link.placeholder")},css:{label:this.$t("editor.blocks.image.css.label"),type:"text",icon:"code"}}}},methods:{caption:function(t){this.input({caption:t})},edit:function(){this.attrs.guid&&this.$router.push(this.attrs.guid)},focus:function(){this.$refs.element.focus()},input:function(t){this.$emit("input",{attrs:b({},this.attrs,t)})},fetchFile:function(t){var e=this;this.$api.get(t).then(function(t){e.input({guid:t.link,src:t.url,id:t.id,ratio:t.dimensions.ratio})})},insertFile:function(t){var e=t[0];this.fetchFile(e.link)},insertUpload:function(t,e){this.fetchFile(e[0].link)},menu:function(){return this.attrs.src?[{icon:"open",label:this.$t("editor.blocks.image.open.browser"),click:this.open},{icon:"edit",label:this.$t("editor.blocks.image.open.panel"),click:this.edit,disabled:!this.attrs.guid},{icon:"cog",label:this.$t("editor.blocks.image.settings"),click:this.$refs.settings.open},{icon:"image",label:this.$t("editor.blocks.image.replace"),click:this.replace}]:[]},open:function(){window.open(this.attrs.src)},onLoad:function(){var t=this.$refs.image;!this.attrs.ratio&&t&&t.width&&t.height&&this.input({ratio:t.width/t.height})},replace:function(){this.$emit("input",{attrs:{}})},selectFile:function(){this.$refs.fileDialog.open({endpoint:this.endpoints.field+"/files",multiple:!1,selected:[this.attrs.id]})},settings:function(){this.$refs.settings.open()},saveSettings:function(){this.$refs.settings.close(),this.input(this.attrs)},uploadFile:function(){this.$refs.fileUpload.open({url:window.panel.api+"/"+this.endpoints.field+"/upload",multiple:!1,accept:"image/*"})}}};if(typeof a==="function"){a=a.options}Object.assign(a,function(){var render=function(){var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c("div",[_c("figure",[_vm.attrs.src?[_c("div",{ref:"element",staticClass:"k-editor-image-block-wrapper",style:_vm.style,attrs:{"data-responsive":_vm.attrs.ratio,"tabindex":"0"},on:{"keydown":[function($event){if(!$event.type.indexOf("key")&&_vm._k($event.keyCode,"delete",[8,46],$event.key,["Backspace","Delete","Del"])){return null}return _vm.$emit("remove")},function($event){if(!$event.type.indexOf("key")&&_vm._k($event.keyCode,"enter",13,$event.key,"Enter")){return null}return _vm.$emit("append")},function($event){if(!$event.type.indexOf("key")&&_vm._k($event.keyCode,"up",38,$event.key,["Up","ArrowUp"])){return null}$event.preventDefault();return _vm.$emit("prev")},function($event){if(!$event.type.indexOf("key")&&_vm._k($event.keyCode,"down",40,$event.key,["Down","ArrowDown"])){return null}$event.preventDefault();return _vm.$emit("next")}]}},[_c("img",{key:_vm.attrs.src,ref:"image",attrs:{"src":_vm.attrs.src},on:{"dblclick":_vm.selectFile,"load":_vm.onLoad}})]),_vm._v(" "),_c("figcaption",[_c("k-editable",{attrs:{"content":_vm.attrs.caption,"breaks":true,"placeholder":_vm.$t("editor.blocks.image.caption.placeholder")+"\u2026"},on:{"input":_vm.caption}})],1)]:[_c("div",{ref:"element",staticClass:"k-editor-image-block-placeholder",attrs:{"tabindex":"0"}},[_c("k-button",{attrs:{"icon":"upload"},on:{"click":_vm.uploadFile}},[_vm._v(_vm._s(_vm.$t("editor.blocks.image.upload")))]),_vm._v(" "+_vm._s(_vm.$t("editor.blocks.image.or"))+" "),_c("k-button",{attrs:{"icon":"image"},on:{"click":_vm.selectFile}},[_vm._v(_vm._s(_vm.$t("editor.blocks.image.select")))])],1)]],2),_vm._v(" "),_c("k-files-dialog",{ref:"fileDialog",on:{"submit":function($event){return _vm.insertFile($event)}}},[_c("k-upload",{ref:"fileUpload",on:{"success":_vm.insertUpload}},[_c("k-dialog",{ref:"settings",attrs:{"size":"medium"},on:{"submit":_vm.saveSettings}},[_c("k-form",{attrs:{"fields":_vm.fields},on:{"submit":_vm.saveSettings},model:{value:_vm.attrs,callback:function($$v){_vm.attrs=$$v},expression:"attrs"}})],1)],1)],1)],1)};var staticRenderFns=[];return{render:render,staticRenderFns:staticRenderFns,_compiled:true,_scopeId:null,functional:undefined}}());editor.block("srcset",a);})();